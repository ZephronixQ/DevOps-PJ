# Ansible for Linux Server Configuration

Этот раздел проекта "DevOps-PJ" предназначен для автоматизации конфигурации Linux серверов с использованием Ansible. Ansible — это инструмент для управления конфигурацией, который позволяет упрощать процессы развертывания и управления серверами. Он использует файлы playbook для описания состояния серверов и автоматически применяет необходимые изменения.


## Требования для запуска Ansible

Перед запуском Ansible, убедитесь, что ваша система соответствует следующим требованиям:

1. **Операционная система:** Linux (предпочтительно, так как Ansible изначально разрабатывался для работы в Unix-подобных системах).
2. **Debian12:** Необходим образ виртуальной машины Debian12, расположенный в папке VMware.

### Использование

1. Склонируйте репозиторий на локальную машину.
2. Запустите скрипт `init.sh`, чтобы настроить целевые сервера и начать автоматическую настройку.

### Структура плейбука

1. **Установка и настройка пакетов**: Устанавливает и настраивает пакеты, включая `network-manager`, `isc-dhcp-server`, `radvd`, `frr`, `strongswan`, `chrony`, `nfs-common`, `firewalld`, `iptables-persistent` и другие.
2. **Настройка сети**: Настраивает сетевые интерфейсы, DHCP, VPN, OSPF, DNS и маршрутизацию на целевых серверах.
3. **Настройка сервисов**: Конфигурирует и перезапускает сервисы, включая NTP, NFS и CUPS.
4. **Настройка безопасности**: Конфигурирует базовую безопасность серверов с использованием Firewalld, Iptables и NetSec.


## Конфигурация серверов

### Топология сети

```lua
                                    +---------+         +---------+         +---------+
                                    |   R1    | ------- |   R0    | ------- |   R2    |
                                    +----+----+         +----+----+         +----+----+
                                         |                                       |
                                         |                                       |
                                    +----+----+                             +----+----+
                                    |  PC_R1  |                             |  PC_R2  |
                                    +----+----+                             +----+----+
```

### Настройка IP-адресов

1. **Таблица IP-адресации:**

   | Имя | IPv4 | IPv6 |
   | --- | --- | --- |
   | R0 | 111.100.100.1/24, 222.100.100.1/24 | 1110:A::1/64, 2220:B::1/64 |
   | R1 | 111.100.100.2/24, 100.100.100.1/26 | 1110:A::100/64, 10:100:C::1/122 |
   | R2 | 222.100.100.2/24, 200.200.200.1/28 | 2220:B::100/64, 20:200:C::1/122 |
   | PC_R1 | 100.100.100.2/26 | 10:100:C::3/122 |
   | PC_R2 | 200.200.200.2/28 | 20:200:C::3/122 |

   **Пул адресов:**

   - **BR**: до 16 адресов
   - **HQ**: до 64 адресов

2. **Настройка маршрутизации и IP-адресов**:
   - **OSPF**: Динамическая маршрутизация через OSPF на R1 и R2.
   - **VPN**: Настройка VPN Tunnel между R1 и R2.
   - **DHCP**: Автоматическое распределение IP-адресов для PC-R1 и PC-R2, зарезервированный адрес для сервера.

3. **Конфигурация VPN, IPsec, OSPF и DNS**:
   - **VPN/IPsec**: Автоматизация настройки VPN на R1 и R2.
   - **OSPF**: Настройка OSPF для динамической маршрутизации.
   - **DNS**: Конфигурация DNS-серверов и зон.

4. **Настройка NTP, NFS и CUPS**:
   - **NTP**: Настройка времени через Chrony.
   - **NFS**: Настройка NFS сервера на PC_R1 и клиента на R1.
   - **CUPS**: Конфигурация сервера печати на PC_R1.

5. **Настройка безопасности**:
   - **Firewalld**:
     - Включение и настройка Firewalld.
     - Открытие портов, настройка NAT и маскарадинга.
   - **Iptables**:
     - Правила для блокировки и разрешения трафика, настройка VPN.
   - **NetSec**:
     - Логирование TCP-трафика, настройка внутренней зоны и NAT.

## Заключение
Если у Вас возникли вопросы или проблемы с данным проектом, пожалуйста, свяжитесь со мной по электронной почте [zephronixq@gmail.com](mailto:zephronixq@gmail.com).

